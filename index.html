<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Fight Times – UFC & Boxing Schedules</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Barlow+Condensed:wght@400;600;700;900&family=Barlow:wght@400;500&display=swap" rel="stylesheet">

<style>
:root {
  --bg:       #080808;
  --surface:  #101010;
  --surface2: #181818;
  --red:      #e8003d;
  --red-dim:  rgba(232,0,61,0.15);
  --gold:     #f5c518;
  --text:     #f0f0f0;
  --muted:    #666;
  --border:   rgba(255,255,255,0.06);
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior:smooth; }

body {
  font-family: 'Barlow', sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
}

body::before {
  content:'';
  position:fixed; inset:0;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.035'/%3E%3C/svg%3E");
  pointer-events:none; z-index:9999; opacity:.5;
}

/* HEADER */
header {
  display:flex; align-items:center; justify-content:space-between;
  padding:1.4rem 3rem;
  border-bottom:1px solid var(--border);
  position:sticky; top:0;
  background:rgba(8,8,8,0.94);
  backdrop-filter:blur(14px);
  z-index:100;
}

.logo { font-family:'Bebas Neue',sans-serif; font-size:1.9rem; letter-spacing:0.1em; color:var(--text); text-decoration:none; }
.logo span { color:var(--red); }

nav { display:flex; gap:2.5rem; align-items:center; }
nav a {
  font-family:'Barlow Condensed',sans-serif;
  font-weight:700; font-size:0.85rem;
  letter-spacing:0.18em; text-transform:uppercase;
  color:var(--muted); text-decoration:none;
  transition:color .2s;
}
nav a:hover { color:var(--text); }

/* HERO SECTION */
.hero-section { padding:3rem 3rem 0; max-width:1400px; margin:0 auto; }

.hero-label {
  font-family:'Barlow Condensed',sans-serif;
  font-size:0.75rem; font-weight:700;
  letter-spacing:0.28em; text-transform:uppercase;
  color:var(--red);
  display:flex; align-items:center; gap:.6rem;
  margin-bottom:1.5rem;
}

.hero-label .pulse {
  width:7px; height:7px; border-radius:50%;
  background:var(--red);
  animation: blink 1.3s ease-in-out infinite;
}

@keyframes blink {
  0%,100% { opacity:1; transform:scale(1); }
  50%      { opacity:.4; transform:scale(1.7); }
}

.hero-cards {
  display: grid;
  gap: 2px;
  background: var(--border);
  border: 1px solid var(--border);
}

.hero-cards.count-1 { grid-template-columns: 1fr; }
.hero-cards.count-2 { grid-template-columns: 1fr 1fr; }
.hero-cards.count-3,
.hero-cards.count-4 { grid-template-columns: repeat(3, 1fr); }

.hero-card {
  background: var(--surface);
  position:relative; overflow:hidden;
  padding: 2.8rem 3rem 2rem;
  display:flex; flex-direction:column;
  transition: background .25s;
  animation: fadeUp .6s ease both;
  min-height: 280px;
  text-decoration: none;
  color: inherit;
  cursor: pointer;
}

.hero-card:hover { background: var(--surface2); }

.hero-card::before {
  content:''; position:absolute; top:0; left:0; right:0;
  height:3px;
  background: linear-gradient(90deg, var(--red), transparent);
}

/* Click hint on hero card */
.hero-card::after {
  content: 'VIEW CARD ↗';
  position: absolute;
  top: 1.2rem; right: 1.5rem;
  font-family: 'Barlow Condensed', sans-serif;
  font-size: 0.65rem; font-weight: 700;
  letter-spacing: 0.2em;
  color: var(--muted);
  opacity: 0;
  transition: opacity .2s;
}
.hero-card:hover::after { opacity: 1; }

.hero-card-bg-time {
  position:absolute; bottom:-1rem; right:1rem;
  font-family:'Bebas Neue',sans-serif;
  font-size:9rem; line-height:1;
  color:rgba(255,255,255,0.025);
  pointer-events:none; user-select:none;
}

.hero-matchup {
  display:flex; align-items:center; gap:1.2rem;
  margin-bottom:1rem;
  flex-wrap:wrap;
}

.hero-fighter {
  font-family:'Bebas Neue',sans-serif;
  letter-spacing:0.03em; line-height:.95;
  color:var(--text);
}

.count-1 .hero-fighter { font-size: clamp(3.5rem, 7vw, 7rem); }
.count-2 .hero-fighter { font-size: clamp(2.5rem, 3.5vw, 4.5rem); }
.count-3 .hero-fighter,
.count-4 .hero-fighter { font-size: clamp(1.8rem, 2.5vw, 3.2rem); }

.hero-vs {
  font-family:'Bebas Neue',sans-serif;
  font-size:1.3rem; color:var(--red);
  background: var(--red-dim);
  padding:.2rem .7rem; border-radius:2px;
  flex-shrink:0;
}

.hero-meta {
  display:flex; flex-wrap:wrap; gap:.5rem 2.5rem;
  margin-top:auto; padding-top:1.4rem;
  border-top:1px solid var(--border);
}

.hero-meta-item { display:flex; flex-direction:column; gap:.15rem; }

.hero-meta-label {
  font-family:'Barlow Condensed',sans-serif;
  font-size:0.65rem; font-weight:700;
  letter-spacing:0.2em; text-transform:uppercase;
  color:var(--muted);
}

.hero-meta-value {
  font-family:'Barlow Condensed',sans-serif;
  font-size:1.8rem; font-weight:700;
  color:var(--text); letter-spacing:0.04em;
}

.hero-meta-value.countdown-val {
  font-family:'Bebas Neue',sans-serif;
  font-size:1.8rem; color:var(--gold);
  letter-spacing:0.06em;
}

.hero-meta-value.live-val { color:var(--red); animation: blink 1s infinite; }

/* SPORT BADGES */
.fight-sport {
  font-family:'Barlow Condensed',sans-serif;
  font-size:0.7rem; font-weight:800;
  letter-spacing:0.2em; text-transform:uppercase;
  padding:.35rem .75rem; border-radius:3px;
  display:inline-flex; align-items:center;
  justify-content:center; min-width:70px;
  transition:all .25s ease;
}
.fight-sport::before {
  content:''; width:6px; height:6px; border-radius:50%; margin-right:.5rem;
}
.sport-ufc {
  background:linear-gradient(135deg,rgba(232,0,61,.18),rgba(232,0,61,.05));
  color:var(--red); border:1px solid rgba(232,0,61,.4);
}
.sport-ufc::before { background:var(--red); box-shadow:0 0 8px var(--red); }
.sport-boxing {
  background:linear-gradient(135deg,rgba(245,197,24,.18),rgba(245,197,24,.05));
  color:var(--gold); border:1px solid rgba(245,197,24,.35);
}
.sport-boxing::before { background:var(--gold); box-shadow:0 0 8px var(--gold); }

/* SCHEDULE SECTION */
.schedule-section { max-width:1400px; margin:0 auto; padding:3rem 3rem 6rem; }

.schedule-header {
  display:flex; align-items:baseline; justify-content:space-between;
  margin-bottom:1.5rem;
  padding-bottom:1rem;
  border-bottom:1px solid var(--border);
}

.schedule-sub {
  font-family:'Barlow Condensed',sans-serif;
  font-size:0.8rem; font-weight:700;
  letter-spacing:0.2em; text-transform:uppercase;
  color:var(--muted);
}

/* RANGE TOGGLE */
.range-toggle {
  display:flex; background:var(--surface);
  border:1px solid var(--border); border-radius:4px; overflow:hidden;
}
.range-btn {
  font-family:'Barlow Condensed',sans-serif;
  font-weight:700; font-size:0.75rem;
  letter-spacing:0.18em; text-transform:uppercase;
  padding:.55rem 1.2rem; background:transparent;
  color:var(--muted); border:none; cursor:pointer; transition:all .25s ease;
}
.range-btn:hover { background:rgba(255,255,255,0.04); color:var(--text); }
.range-btn.active {
  background:linear-gradient(135deg,var(--red),#a8002b);
  color:#fff; box-shadow:0 0 14px rgba(232,0,61,.35);
}

/* FIGHT ROW — now a clickable link */
.fight-row {
  display:grid;
  grid-template-columns: 80px 1fr 200px 160px 170px;
  align-items:center;
  gap:1.5rem;
  padding:1.3rem 1rem;
  border-bottom:1px solid var(--border);
  text-decoration:none;
  color:inherit;
  transition:background .2s;
  position:relative;
}
.fight-row:hover { background:var(--surface); }
.fight-row:last-child { border-bottom: 1px solid var(--border); }

/* Arrow indicator on hover */
.fight-row .row-arrow {
  position:absolute; right:1rem; top:50%; transform:translateY(-50%);
  font-size:1.1rem; color:var(--red);
  opacity:0; transition:opacity .2s, transform .2s;
}
.fight-row:hover .row-arrow { opacity:1; transform:translateY(-50%) translateX(3px); }

.fight-matchup { display:flex; flex-direction:column; gap:.25rem; }

.fight-date {
  font-family:'Barlow Condensed',sans-serif;
  font-size:0.9rem; font-weight:700;
  letter-spacing:0.18em; text-transform:uppercase;
  color:var(--white); margin-bottom:.3rem;
}

.fight-fighters {
  font-family:'Barlow Condensed',sans-serif;
  font-size:1.4rem; font-weight:900;
  letter-spacing:0.02em; line-height:1.05;
  color:var(--text);
}

.fight-event-name {
  font-family:'Barlow Condensed',sans-serif;
  font-size:0.79rem; font-weight:600;
  letter-spacing:0.06em; color:var(--muted);
  text-transform:uppercase;
}

.fight-location {
  font-family:'Barlow Condensed',sans-serif;
  font-size:1.1rem; font-weight:600;
  color:var(--muted); line-height:1.4;
}
.fight-location strong { display:block; color:var(--text); font-size:1rem; font-weight:700; }

.fight-time { font-family:'Barlow Condensed',sans-serif; font-weight:700; line-height:1.3; }
.fight-time .time-main {
  font-family:'Bebas Neue',sans-serif;
  font-size:1.8rem; color:var(--text);
  display:block; letter-spacing:0.06em;
}
.fight-time .time-zone { font-size:0.72rem; color:var(--muted); letter-spacing:0.12em; text-transform:uppercase; }

.fight-countdown {
  font-family:'Bebas Neue',sans-serif;
  font-size:1.5rem; letter-spacing:0.06em;
  color:var(--gold); text-align:right;
}
.fight-countdown.is-live { color:var(--red); animation:blink 1s infinite; }
.fight-countdown.is-soon { color:#ff8c42; }

/* BOTTOM NAV */
.bottom-nav {
  display:grid; grid-template-columns:1fr 1fr;
  gap:1px; background:var(--border);
  border-top:1px solid var(--border);
}
.bottom-nav-card {
  background:var(--surface);
  padding:2.5rem 3rem;
  text-decoration:none;
  display:flex; align-items:center; justify-content:space-between;
  transition:background .25s; position:relative; overflow:hidden;
}
.bottom-nav-card:hover { background:var(--surface2); }
.bottom-nav-card::after {
  content:''; position:absolute; bottom:0; left:0; right:0;
  height:2px; background:var(--red);
  transform:scaleX(0); transform-origin:left;
  transition:transform .35s ease;
}
.bottom-nav-card:hover::after { transform:scaleX(1); }
.bnc-label { font-family:'Barlow Condensed',sans-serif; font-size:0.72rem; font-weight:700; letter-spacing:0.2em; text-transform:uppercase; color:var(--muted); margin-bottom:.4rem; }
.bnc-title { font-family:'Bebas Neue',sans-serif; font-size:3rem; letter-spacing:0.04em; line-height:1; color:var(--text); }
.bnc-arrow { font-size:1.8rem; color:var(--red); transition:transform .25s; }
.bottom-nav-card:hover .bnc-arrow { transform:translate(5px,-5px); }

/* FOOTER */
footer {
  padding:2rem 3rem;
  display:flex; align-items:center; justify-content:space-between;
  border-top:1px solid var(--border);
}
.footer-logo { font-family:'Bebas Neue',sans-serif; font-size:1.3rem; letter-spacing:.08em; color:var(--muted); }
.footer-logo span { color:var(--red); }
.footer-copy { font-size:.78rem; color:var(--muted); letter-spacing:.05em; }

/* LOADING / ERROR */
.state-box {
  padding:5rem 3rem; text-align:center;
  color:var(--muted); font-family:'Barlow Condensed',sans-serif;
  font-size:1.1rem; letter-spacing:.06em;
}
.spinner {
  width:28px; height:28px;
  border:2px solid rgba(232,0,61,.2);
  border-top-color:var(--red); border-radius:50%;
  animation:spin .7s linear infinite;
  margin:0 auto 1rem;
}
@keyframes spin { to { transform:rotate(360deg); } }
.error-bar {
  background:rgba(232,0,61,.07); border:1px solid rgba(232,0,61,.2);
  border-radius:3px; padding:.7rem 1.5rem;
  font-size:.85rem; color:#ff6b6b; margin:.5rem 3rem;
  font-family:'Barlow Condensed',sans-serif;
}
@keyframes fadeUp {
  from { opacity:0; transform:translateY(20px); }
  to   { opacity:1; transform:translateY(0); }
}

/* RESPONSIVE */
@media (max-width:1000px) {
  header { padding:1.2rem 1.5rem; }
  .hero-section, .schedule-section { padding-left:1.5rem; padding-right:1.5rem; }
  .hero-cards.count-2,
  .hero-cards.count-3,
  .hero-cards.count-4 { grid-template-columns:1fr; }
  .fight-row {
    grid-template-columns: 70px 1fr;
    grid-template-rows: auto auto auto;
    gap:.5rem 1rem;
  }
  .fight-location { grid-column:2; }
  .fight-time     { grid-column:2; }
  .fight-countdown{ grid-column:2; text-align:left; font-size:1.2rem; }
  .bottom-nav { grid-template-columns:1fr; }
  footer { padding:1.5rem; flex-direction:column; gap:.5rem; text-align:center; }
}
</style>
</head>
<body>

<header>
  <a href="/" class="logo">Fight<span>Times</span></a>
  <nav>
    <a href="ufc.html">UFC</a>
    <a href="boxing.html">Boxing</a>
  </nav>
</header>

<div id="errorContainer"></div>

<section class="hero-section">
  <div class="hero-label">
    <span class="pulse"></span>
    <span id="heroLabel">Next Fight Night</span>
  </div>
  <div class="hero-cards count-1" id="heroCards">
    <div class="state-box" style="grid-column:1/-1">
      <div class="spinner"></div>
      Loading fights...
    </div>
  </div>
</section>

<section class="schedule-section">
  <div class="schedule-header">
    <div class="range-toggle">
      <button class="range-btn active" data-range="7">7 DAYS</button>
      <button class="range-btn" data-range="30">30 DAYS</button>
    </div>
    <span class="schedule-sub" id="rangeLabel">Next 7 days</span>
  </div>
  <div id="scheduleList">
    <div class="state-box"><div class="spinner"></div></div>
  </div>
</section>

<div class="bottom-nav">
  <a href="ufc.html" class="bottom-nav-card">
    <div><div class="bnc-label">Full schedule</div><div class="bnc-title">UFC</div></div>
    <div class="bnc-arrow">↗</div>
  </a>
  <a href="boxing.html" class="bottom-nav-card">
    <div><div class="bnc-label">Full schedule</div><div class="bnc-title">Boxing</div></div>
    <div class="bnc-arrow">↗</div>
  </a>
</div>

<footer>
  <div class="footer-logo">Fight<span>Times</span></div>
  <div class="footer-copy">© 2026 Fight Times • Powered by Cloudflare Pages</div>
</footer>

<script>
// ─────────────────────────────────────────────────────────────
// HELPERS
// ─────────────────────────────────────────────────────────────
function showError(msg) {
  const c = document.getElementById('errorContainer');
  const d = document.createElement('div');
  d.className = 'error-bar';
  d.textContent = '⚠ ' + msg;
  c.appendChild(d);
}

function dayKey(dateStr) {
  const d = new Date(dateStr);
  return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
}
function todayKey() { return dayKey(new Date()); }
function tomorrowKey() {
  const t = new Date(); t.setDate(t.getDate() + 1); return dayKey(t);
}

function formatTime(dateStr) {
  return new Date(dateStr).toLocaleTimeString('en-GB', { hour:'2-digit', minute:'2-digit' });
}
function formatTimeZone(dateStr) {
  return new Date(dateStr).toLocaleTimeString('en-GB', { timeZoneName:'short' }).split(' ').pop();
}

function getCountdown(dateStr) {
  const diff = new Date(dateStr) - Date.now();
  if (diff <= 0) return { str:'● LIVE NOW', state:'live' };
  const d = Math.floor(diff / 86400000);
  const h = Math.floor((diff % 86400000) / 3600000);
  const m = Math.floor((diff % 3600000) / 60000);
  const s = Math.floor((diff % 60000) / 1000);
  const str = d > 0 ? `${d}D ${h}H ${m}M` : `${h}H ${m}M ${s}S`;
  return { str, state: diff < 3600000 ? 'soon' : 'upcoming' };
}

function parseFighters(title) {
  if (!title) return [null, null];
  const clean = title.replace(/^[^:]+:\s*/, '').trim();
  const m = clean.match(/^(.+?)\s+vs\.?\s+(.+)$/i);
  return m ? [m[1].trim(), m[2].trim()] : [clean, null];
}

function formatScheduleDate(dateStr) {
  return new Date(dateStr).toLocaleDateString('en-GB', {
    weekday:'short', day:'numeric', month:'short'
  }).toUpperCase();
}

// ─────────────────────────────────────────────────────────────
// FETCH
// ─────────────────────────────────────────────────────────────
async function fetchAllFights() {
  const res = await fetch('/api/fights');
  if (!res.ok) throw new Error(`API ${res.status}`);
  return res.json();
}

// ─────────────────────────────────────────────────────────────
// NORMALIZE — pass through id field
// ─────────────────────────────────────────────────────────────
function normalizeBoxing(raw) {
  return (raw || []).map(f => ({
    id: f.id || '',
    type: 'Boxing',
    title: f.event || '',
    displayTitle: f.main_event || '',
    date: f.date || f.time_utc,
    location: f.location || '',
    venue: f.venue || '',
    promotion: f.promotion || 'Boxing'
  })).filter(f => f.date && f.displayTitle);
}

function normalizeUFC(raw) {
  return (raw || []).map(f => ({
    id: f.id || '',
    type: 'UFC',
    title: f.event || '',
    displayTitle: f.main_event || '',
    date: f.date || f.time_utc,
    location: f.location || '',
    venue: f.venue || '',
    promotion: f.promotion || 'UFC'
  })).filter(f => f.date && f.displayTitle);
}

// ─────────────────────────────────────────────────────────────
// HERO
// ─────────────────────────────────────────────────────────────
let intervals = [];

function renderHero(events) {
  intervals.forEach(clearInterval);
  intervals = [];

  const container = document.getElementById('heroCards');
  container.innerHTML = '';

  const count = Math.min(events.length, 4);
  container.className = `hero-cards count-${count}`;

  events.forEach(event => {
    const [f1, f2] = parseFighters(event.displayTitle);
    if (!f1) return;

    // Make the card a link
    const card = document.createElement('a');
    card.className = 'hero-card';
    card.href = `event.html?id=${encodeURIComponent(event.id)}`;

    const id = Math.random().toString(36).slice(2);
    const time = formatTime(event.date);
    const tz = formatTimeZone(event.date);
    const loc = [event.venue, event.location].filter(Boolean).join(', ');

    card.innerHTML = `
      <div class="hero-card-bg-time">${time}</div>
      <div class="hero-matchup">
        <span class="hero-fighter">${f1}</span>
        ${f2 ? `<span class="hero-vs">VS</span><span class="hero-fighter">${f2}</span>` : ''}
      </div>
      <div class="hero-meta">
        <div class="hero-meta-item">
          <span class="hero-meta-label">Location</span>
          <span class="hero-meta-value">${loc}</span>
        </div>
        <div class="hero-meta-item">
          <span class="hero-meta-label">Time</span>
          <span class="hero-meta-value">${time} ${tz}</span>
        </div>
        <div class="hero-meta-item">
          <span class="hero-meta-label">Countdown</span>
          <span class="hero-meta-value countdown-val" id="cd-${id}">—</span>
        </div>
      </div>
    `;

    function tick() {
      const el = document.getElementById(`cd-${id}`);
      if (!el) return;
      el.textContent = getCountdown(event.date).str;
    }
    tick();
    intervals.push(setInterval(tick, 1000));

    container.appendChild(card);
  });
}

// ─────────────────────────────────────────────────────────────
// SCHEDULE
// ─────────────────────────────────────────────────────────────
function renderSchedule(events) {
  const list = document.getElementById('scheduleList');
  list.innerHTML = '';

  if (!events.length) {
    list.innerHTML = `<div class="state-box">No events found.</div>`;
    return;
  }

  events.forEach(event => {
    // Each row is now an <a> tag
    const row = document.createElement('a');
    row.className = 'fight-row';
    row.href = `event.html?id=${encodeURIComponent(event.id)}`;

    const [f1, f2] = parseFighters(event.displayTitle);
    const time = formatTime(event.date);
    const tz = formatTimeZone(event.date);
    const fightDate = formatScheduleDate(event.date);

    row.innerHTML = `
      <div>
        <span class="fight-sport ${event.type === 'UFC' ? 'sport-ufc' : 'sport-boxing'}">
          ${event.type}
        </span>
      </div>
      <div class="fight-matchup">
        <div class="fight-date">${fightDate}</div>
        <div class="fight-fighters">${f1}${f2 ? ' vs ' + f2 : ''}</div>
        <div class="fight-event-name">${event.title}</div>
      </div>
      <div class="fight-location">${event.venue}</div>
      <div class="fight-time">
        <span class="time-main">${time}</span>
        <span class="time-zone">${tz}</span>
      </div>
      <div class="fight-countdown">${getCountdown(event.date).str}</div>
      <span class="row-arrow">↗</span>
    `;

    list.appendChild(row);
  });
}

// ─────────────────────────────────────────────────────────────
// FILTER SYSTEM (7 / 30 DAYS)
// ─────────────────────────────────────────────────────────────
let allEvents = [];
let selectedRange = 7;

function filterAndRender() {
  const now = Date.now();
  const limit = now + selectedRange * 86400000;

  const upcoming = allEvents
    .filter(e => {
      const t = new Date(e.date).getTime();
      return t >= now && t <= limit;
    })
    .sort((a,b) => new Date(a.date) - new Date(b.date));

  if (!upcoming.length) {
    document.getElementById('heroCards').innerHTML =
      `<div class="state-box">No events in next ${selectedRange} days.</div>`;
    document.getElementById('scheduleList').innerHTML = '';
    return;
  }

  const firstDay = dayKey(upcoming[0].date);
  renderHero(upcoming.filter(e => dayKey(e.date) === firstDay));
  renderSchedule(upcoming);

  document.getElementById('rangeLabel').textContent = `Next ${selectedRange} days`;
}

function setupToggle() {
  document.querySelectorAll('.range-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.range-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      selectedRange = parseInt(btn.dataset.range);
      filterAndRender();
    });
  });
}

// ─────────────────────────────────────────────────────────────
// INIT
// ─────────────────────────────────────────────────────────────
async function init() {
  try {
    const data = await fetchAllFights();
    const boxing = normalizeBoxing(data.boxing);
    const ufc = normalizeUFC(data.ufc);
    allEvents = [...boxing, ...ufc];
    filterAndRender();
    setupToggle();
  } catch (err) {
    console.error(err);
    showError(err.message);
  }
}

init();
</script>
</body>
</html>